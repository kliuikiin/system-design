## Задание

![[Pasted image 20250426175220.png]]
[Линк](https://www.architecturalkatas.com/kata.html?kata=TakingRequests.json)

## ФТ и НФТ (ДЗ1)
[Линк](https://github.com/nikolaysavelev/system-design-hse-miem-2025/pull/8)
## Выполнение

Проработаем архитектуру по следующим пунктам:
- Сервисы и их интеграции
- Выбрать способ взаимодействия между сервисами, написать обоснование
- Сделать верхнеуровневую схему HLD: описать клиента, сервисы, интеграции

### Сервисы и их интеграции
| Сервис                         | Назначение                                               |
| ------------------------------ | -------------------------------------------------------- |
| Auth Service                   | Регистрация и аутентификация пользователей и сотрудников |
| User Service                   | Управление профилями и ролями пользователей              |
| Music Catalog Service          | Хранение и поиск песен и исполнителей                    |
| Requests & Voting Service      | Подача заявок, голосование, подсчет результатов          |
| Playlists Service              | Управление плейлистами, загрузка и ранжирование          |
| DJ/Admin Interface Service     | Интерфейс и API для сотрудников радиостанции             |
| Integration Service            | Интеграция с эфирным софтом (определение текущей песни)  |
| Notification Service           | Отправка уведомлений пользователям (email, push)         |
| Real-time Notification Service | Рассылка обновлений в реальном времени (WebSocket)       |
### Взаимодействие сервисов, обоснование
| Связь между сервисами                                         | Тип интеграции                              | Мотивация выбора типа интеграции                    |
| ------------------------------------------------------------- | ------------------------------------------- | --------------------------------------------------- |
| Клиент <-> Auth Service                                       | Синхронный REST API                         | Требуется мгновенное подтверждение авторизации      |
| Клиент <-> Requests & Voting Service                          | Синхронный REST + WebSocket                 | Быстрое взаимодействие и realtime обновления        |
| Клиент <-> DJ/Admin Interface Service (DJ Service)            | Синхронный REST API                         | Сотрудники получают доступ к своему интерфейсу      |
| Requests & Voting Service <-> Music Catalog Service           | Синхронный REST API                         | Для валидации песен и поиска                        |
| DJ/Admin Interface Service (DJ Service) <-> Playlists Service | Синхронный REST API                         | Управление плейлистами сотрудниками                 |
| DJ/Admin Interface Service (DJ Service) <-> User Service      | Синхронный REST API                         | Доступ к профилям и ролям пользователей             |
| Playlists Service <-> Requests & Voting Service               | Асинхронный через Event Bus / Message Queue | Масштабируемость при обновлениях голосований        |
| Real-time Notification Service <-> Клиенты                    | WebSocket                                   | Обновления в реальном времени                       |
| Integration Service <-> Music Catalog Service                 | Синхронный REST API                         | Автоматическое обновление текущей песни             |
| Auth Service <-> User Service                                 | Синхронный REST API                         | Отделение авторизации и управления пользователями   |
| Notification Service <-> Клиенты                              | Асинхронный (push, email)                   | Отправка уведомлений без задержек в основном потоке |
### Верхнеуровневая схема HLD
![[Pasted image 20250620023322.png]]

### Общее краткое обоснование
- Синхронные REST API используются для операций, требующих немедленного отклика: авторизация, поиск песен, управление плейлистами, доступ сотрудников к интерфейсу и профилям.
- Асинхронные механизмы (event bus, message queue) применяются для событий с низкой критичностью задержки, например, подсчет голосов, обновление плейлистов, что позволяет масштабировать систему и повысить устойчивость.
- WebSocket сервис обеспечивает обновления данных в реальном времени на клиентских приложениях, поддерживая интерактивность и отзывчивость интерфейса.
- Отдельный сервис интеграции с эфирным софтом позволяет автоматически обновлять информацию о текущем треке.
- Разделение сервисов авторизации и управления пользователями улучшает безопасность и облегчает управление ролями.
- Отдельный Notification Service позволяет централизованно управлять рассылкой уведомлений по различным каналам, не загружая основные сервисы.