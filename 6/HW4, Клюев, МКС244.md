## Задание

![[Pasted image 20250426175220.png]]
[Линк](https://www.architecturalkatas.com/kata.html?kata=TakingRequests.json)

## ФТ и НФТ (ДЗ1)
[Линк](https://github.com/nikolaysavelev/system-design-hse-miem-2025/pull/8)
## Архитектура и сервисы (ДЗ2)
[Линк](https://github.com/nikolaysavelev/system-design-hse-miem-2025/pull/8)
## Логика хранения данных (ДЗ3)
[Линк](https://github.com/nikolaysavelev/system-design-hse-miem-2025/pull/8)
## Выполнение

Проработаем:
1. Обязательные компоненты допом к HLD из ДЗ3
2. Желательные компоненты допом к HLD из ДЗ3
### Общие соображения

### Обязательные компоненты (MUST)
NB: В этой части я исхожу из того, что мы всё-таки хотим когда-нибудь масштабироваться и чтобы приложение не падало. С учетом ФТ и НФТ это можно хоть за неделю на коленке написать, но хочется заложиться под масштабирование и снизить репутационные издержки среди потенциальными юзерами из-за упавшего прода)

| Компонент                 | Обоснование                                                                                                                                                                                                                                       | Реализация (возможгые технологии)                               |
| ------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | --------------------------------------------------------------- |
| **Кэш**                   | Уменьшает нагрузку на БД для "горячих" данных, таких как результаты голосований и уведомления, что улучшает производительность.<br><br>NB: Уже упомянуто в ходе выполнения ДЗ3                                                                    | Redis Cluster для кэширования данных.                           |
| **CI/CD**                 | Автоматизация развертывания и тестирования. Уменьшает время вывода новых функций на рынок и минимизирует риски.                                                                                                                                   | GitLab CI: build → security scan → canary deploy                |
| **Обзервабилити**         | Логирование сервисов, снятие метрик и трекинг трейсов для мониторинга и анализа производительности, что соответствует НФТ.                                                                                                                        | OpenTelemetry Collector + Prometheus + Grafana                  |
| **Резервное копирование** | Гарантия восстановления данных (RPO < 1 мин), что соответствует требованиям 152-ФЗ.                                                                                                                                                               | Daily snapshots S3 + WAL-G для PostgreSQL                       |
| Docker                    | Обеспечивает контейнеризацию приложений, что позволяет изолировать их окружение и зависимости. Это упрощает развертывание, масштабирование и управление приложениями, а также обеспечивает консистентность между средами разработки и продакшена. | Docker Compose для управления многоконтейнерными приложениями.  |
### Репликация и шардирование
| Компонент         | Обоснование                                                                                                                                                                        | Реализация                                  |
| ----------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------- |
|                   |                                                                                                                                                                                    |                                             |
| **API Gateway**   | Управление входящими запросами, rate limiting, преобразование протоколов и защита от DDoS-атак.                                                                                    | Tyk API Management                          |
| **Service Mesh**  | Упрощение управления трафиком между микросервисами, что полезно при большом количестве сервисов.                                                                                   | Istio для retries/timeouts/circuit breaking |
| **Feature Flags** | Безопасный rollout новых функций, позволяющий включать и отключать их в реальном времени, что соответствует НФТ.                                                                   | LaunchDarkly для управления флагами функций |
| **Geo DNS**       | Маршрутизация пользователей к ближайшему кластеру для снижения задержек, что улучшает пользовательский опыт.<br><br>NB: Релевантно только при значительном масштабировании сервиса | GeoDNS (Yandex DNS для маршрутизации        |
### Обновленная схема HLD с учетом БД
![[Pasted image 20250620202508.png]]
